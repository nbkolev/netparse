# netparse

Представлява приложение сървър, което  слуша на порт 1234 за постъпващ TCP поток от данни. 
* След извършване на изчисление, отговора се изпраща по обратния TCP канал във същата връзка. Това позволява лесно пренасочване на вход/изход. Пример:
```console
$>echo "1+1" | netcat <address> 1234
$>2
```
* В папка ./benchmark е наличен скрипт `benchmark.sh`, който при пуснат сървър проверява производителността в брой редове в секунда, като безкрайно повтаря файла testinput.lst
# Реализация на пресмятане на математически израз
* Първоначално мислех да реша задачата по метода на рекурсивното спускане (recursive descent), но решението не беше устойчиво от гледна точка на употреба на памет. Пример: `...((((((1+1))))))...` товареше излишно стека поради сложността O(n^2) за памет.
* Поради тази причина, го реализирах с обратна полска нотация, като принципа на работа е следният:
  * Разделяне на текста математическия израз на смислови обекти (tokens) - числа, оператори, скоби ...
  * Сортиране на обектите по метода на обратната полска нотация използвайки метода [Алгоритъм на гарата за сортиране на Дейкстра](https://en.wikipedia.org/wiki/Shunting_yard_algorithm) този алгоритъм е с O(n) за брой операции и памет.
  * Сортираните обекти се пресмятат, чрез прост стеков автомат отново със сложност O(n) за брой операции и памет.
  * За междинните сметки се използва `long double` за резултата `long int`.
# Реализация на сървър за получаване на заявки
* По производителността на сървъра може да се работи много, ако искаме да го оптимизираме добре за многопроцесна работа, което аз съм си спестил, би било редно, при пристигане на математически изрази да ги подредим в опашка,
които да бъде консумирана от набор чакащи нишки (thread pool). Така бихме се лишили и от проблема, какво се случва, ако се закачат десетки хиляди клиенти към текущата имплементация...
  * Предоставената имплементация вдига нова нишка за всяка връзка, която има собствен живот и консумира данните от unix-сокета, като връща резултата от изчислението в същия канал. 
  * С затвяряне на връзката нишката приключва своя живот.
# Компилация
Приложението компилира със стандартния пакет build-essentials в Ubuntu:
```console
apt-get install build-essentials cmake
cmake CMakeLists.txt
make
```


